function CookiesConsentController(){var e=new EventService,t=new AppFlyerService,n=new HttpService;const o=new CountriesService;function i(){var e=JSON.parse(window.localStorage.getItem(LocalStorageKeysConfig.cookiesConsent));e&&e.marketing&&dataLayer.push({cookie_consent:"accepted"},{event:"cookieConsentSubmitted",value:!0,countryByIp:userCountry,userExperiments:userExperiments})}function s(e){window.localStorage.setItem(LocalStorageKeysConfig.cookiesConsent,JSON.stringify(e)),document.getElementById("popup-cookies")?.classList.remove("show"),document.body.classList.remove("backdrop"),i(),t.addAppsFlyerScript(),void 0!==NotificationsPopUpController&&(new NotificationsPopUpController).updateNotifications()}function c(){s({essentials:!0,functional:!0,marketing:!0})}function r(){document.getElementById("popup-cookies-privacySettings").classList.add("show"),document.getElementById("popup-cookies-cookiesOnFxProBlock").classList.remove("show")}function a(e){var t=e.currentTarget.id;document.querySelector(".tabset-cookies__nav .active").classList.remove("active"),document.querySelector(".tab.active").classList.remove("active"),document.getElementById(t).classList.add("active"),document.getElementById(t+"_tab").classList.add("active")}function l(){s({essentials:!0,functional:document.getElementById("functional-checkbox").checked,marketing:document.getElementById("marketing-checkbox").checked})}this.init=function(){window.localStorage.getItem(LocalStorageKeysConfig.cookiesConsent)||o.getUserCountryConfig().then((t=>{if(t.isEu){const t=document.documentElement.lang,o=function(t){const n=document.getElementById("popup-cookies-holder");200===t.status&&n&&(n.innerHTML=t.response,document.getElementById("popup-cookies").classList.add("show"),document.getElementById("popup-cookies-cookiesOnFxProBlock").classList.add("show"),document.body.classList.add("backdrop"),e.applyClickEvent(".cookies-save-settings",l),e.applyClickEvent(".cookies-accept-settings",c),e.applyClickEvent(".cookies-edit-settings",r),e.applyClickEvent(".cookies-change-tab",a))};n.get("/api/static-page/popup-cookies/"+t,o)}else c()})),i()}}function EventsController(){var e=new EventService,t=new LanguageSwitcherController,n=new HttpService;const o=document.getElementById("rates-ticker-section-container");function i(){document.getElementById("language-switcher").classList.contains("show")?(document.getElementById("language-switcher").classList.remove("show"),document.getElementById("language-panel").classList.remove("show"),document.activeElement?.blur()):(t.showDesktopLanguageSwitcher(),document.getElementById("language-switcher").classList.add("show"),document.getElementById("language-panel").classList.add("show"))}function s(){var e=document.getElementById("mobile-language-switcher"),n=document.getElementById("mobile-language-panel");e.classList.contains("show")?c():(t.showMobileLanguageSwitcher(),e.classList.add("show"),n.classList.add("show"))}function c(){var e=document.getElementById("mobile-language-switcher"),t=document.getElementById("mobile-language-panel");e.classList.remove("show"),t.classList.remove("show")}function r(e){const t=e.currentTarget.id,n=document.getElementById(t);if(n.classList.contains("fx-dropdown__toggle_disabled"))return;const o=e.currentTarget.dataset.dropdown,i=document.getElementById(o);n.classList.contains("dropdown-visible")?(n.classList.remove("dropdown-visible"),i.classList.remove("show")):(n.classList.add("dropdown-visible"),i.classList.add("show"))}function a(){document.getElementById("main-menu").classList.add("show"),o&&o.classList.add("low-zindex"),document.body.classList.add("no-scroll")}function l(){document.getElementById("main-menu").classList.remove("show"),o&&o.classList.remove("low-zindex"),document.body.classList.remove("no-scroll")}function d(){document.getElementById("get-started-block").classList.remove("d-md-block"),document.cookie="fx_get_started_shown=true;expires="+new Date(Date.now()+864e5)+";"}function u(){window.scrollTo(0,0)}function p(e){const t=e.currentTarget.id,n=document.getElementsByClassName("scanner");for(const e of n)e.classList.contains("d-none")||e.classList.add("d-none");document.getElementById(`${t}-scanner`).classList.remove("d-none"),document.getElementById("scanners").setAttribute("name",t),document.getElementById("scanners").classList.remove("d-none")}function m(){const e=document.getElementById("scanners").getAttribute("name");document.getElementById(`${e}-scanner`).classList.add("d-none"),document.getElementById("scanners").classList.add("d-none")}window.addEventListener("resize",function(e,t){let n;return function(o){n&&clearTimeout(n),n=setTimeout(e,t,o)}}((function(){this.window.innerWidth>=1024&&l()}),150)),this.init=function(){e.applyClickEvent("#language-switcher",i),e.applyClickEvent("#dropdownLanguage[data-mobile='true']",s),e.applyClickEvent(".fx-dropdown__toggle",r),e.applyClickEvent(".navbar-toggler",a),e.applyClickEvent(".navbar-close-menu",l),e.applyClickEvent(".close-get-started",d),e.applyClickEvent(".back-to-top",u),e.applyClickEvent(".mobile-language-panel .close-icon",c),e.applyClickEvent(".btn-qr",p),e.applyClickEvent(".close-qr-scan-btn",m)},this.onSMSSubmit=function(e){var t=document.getElementById("submit-btn"),o=document.getElementById("submit-message");t.style.display="none",o.style.display="block";var i=document.getElementById("phone-number"),s={phone:(document.getElementById("phone-code").innerText+i.value).replace(/ /g,""),regulator:{regulator:document.getElementById("selected-regulator").innerText,country:document.getElementById("selected-country").dataset.country},type:"direct"};return n.postPromise("/api/SendSms/Send",s,e).then((function(){setTimeout((function(){o.style.display="none",t.style.display="block",i.value=""}),2e3)}))}}function LanguageSwitcherController(){var e=new HttpService;function t(t){var o=document.querySelector("#"+t+" .european.language-holder"),i=document.querySelector("#"+t+" .global.language-holder");if(!o.innerHTML.trim()){e.get("/api/static-page/languages",(function(e){if(200===e.status){var t=JSON.parse(e.response);o.innerHTML=n("European",t),i.innerHTML=n("Global",t)}}))}}function n(e,t){var n="true"===document.body.dataset.test;const o=t.some((e=>e.domains.includes(window.location.host)));return t.filter((function(t){return t.type===e})).map((function(e){const t=e.shortName===document.documentElement.lang?"active-item":"",i=window.location.pathname.replace(/\/language-test\/[\w]{2}/,"").replace(/^\/$/,"");var s=i;if(o&&(s="https://"+e.domains[0]+i),n&&(s=i+"/language-test/"+e.shortName),window.location.host.endsWith(".fxpro.local")){const t=window.location.host.replace(/cw-[\w]+/,""),n=`cw-${e.shortName}${t}`;n!=window.location.host&&(s=`https://${n}${i}`)}if(window.location.host.includes(".uat.")){const t=`www.uat${e.domains[0].replace("https://","").replace("www","")}`;t!=window.location.host&&(s=`https://${t}${i}`)}return'<a _ngcontent-ng-cli-universal-c92=""  rel="nofollow noopener" class="dropdown-item '+t+'" href="'+s+'" > <i _ngcontent-ng-cli-universal-c92="" class="flag-icon flag-icon-'+e.countryFlagCode+'"></i><span class="language-name">'+e.fullName+"</span></a> "})).join("")}this.showDesktopLanguageSwitcher=function(){t("language-switcher")},this.showMobileLanguageSwitcher=function(){t("mobile-language-panel")}}function MenusController(){var e=new RestrictionService,t=new HttpService,n=new EventService;function o(e){var t=e.currentTarget.id,n=e.currentTarget.dataset.submenu;window.innerWidth>=1024&&(document.getElementById(t).classList.add("show","active"),document.getElementById(n)?.classList.add("show"))}function i(e){var t=e.currentTarget.id,n=e.currentTarget.dataset.submenu;window.innerWidth>=1024&&(document.getElementById(t).classList.remove("show","active"),document.getElementById(n)?.classList.remove("show"))}function s(e){var t=e.currentTarget.dataset.menu,n=e.currentTarget.dataset.submenu,o=document.querySelector(".nav-item.show.active");o&&o.id!==t&&(o.classList.remove("show","active"),document.querySelector(".nav-item .dropdown-menu.show").classList.remove("show"));var i=document.getElementById(t),s=document.getElementById(n);i.classList.contains("show")?(i.classList.remove("show","active"),s.classList.remove("show")):(i.classList.add("show","active"),s.classList.add("show"))}function c(e){var t=e.currentTarget.parentNode.id;if(window.innerWidth<1024){var n=document.getElementById(t),o=document.querySelector("#"+t+" ul");n.classList.contains("expanded")?(n.classList.remove("expanded"),o.classList.add("d-none")):(n.classList.add("expanded"),o.classList.remove("d-none"))}}function r(e,t){e&&(e.innerHTML=t)}this.setMenus=function(){const a=e.getRestrictionSnapshot(),l=document.querySelector(".navbar-nav"),d=document.querySelector(".footer-columns"),u=document.querySelectorAll(".topright-menu"),p={restrictionState:a},m=[],h=Promise.resolve(null);return l?m.push(function(e){return t.postPromise("/api/static-page/header-menu",e,null)}(p)):m.push(h),d?m.push(function(e){return t.postPromise("/api/static-page/footer-menu",e,null)}(p)):m.push(h),u?m.push(function(e){return t.postPromise("/api/static-page/header-groups-menu",e,null)}(p)):m.push(h),Promise.all(m).then((e=>{r(l,e[0]),r(d,e[1]),u.forEach((t=>{r(t,e[2]),"GB"===a.selectedCountry||"fca"===a.regulator?t.firstElementChild.classList.remove("hide"):t.firstElementChild.classList.add("hide")})),n.applyMouseEnterEvent(".nav-item.dropdown",o),n.applyMouseLeaveEvent(".nav-item.dropdown",i),n.applyClickEvent(".navbarDropdown",s),n.applyClickEvent(".toggle-list",c)}))}}class QuickAccessPopupController{constructor(){this.eventService=new EventService}init(){this.eventService.applyClickEvent("#quick-access-button",this.openPopup.bind(this)),this.eventService.applyClickEvent("#quick-access-popup .close-button",this.closePopup.bind(this))}openPopup(){document.getElementById("quick-access-popup").classList.add("show"),this.animation()}animation(){document.querySelectorAll(".quick-access-popup .image-container").forEach(((e,t)=>{e.style.animationDelay=.4*t+"s"}))}closePopup(){document.getElementById("quick-access-popup").classList.remove("show")}}function RegulatorSelectorController(){var e=this,t=new RegulatorService,n=new EventService,o=new CookieService,i=new AppFlyerService,s=new MenusController,c=void 0!==NotificationsPopUpController&&new NotificationsPopUpController,r="undefined"!=typeof SectionInstrumentSpecificationsController&&new SectionInstrumentSpecificationsController,a=void 0!==HomeSectionsController&&new HomeSectionsController,l=new ToolsLinkController,d=new LinksService,u=new HttpService,p=new RestrictionService,m=new RestrictionController,h=new LazyLoadService,g=new TradingAccountController,f=new AbTestController;const v="hide",y="flag-icon",w="flag-icon-",S="selected-flag",L=document.getElementById("country-search"),k="selected-country",C=document.getElementById(k),E=document.getElementById("regulator-btn"),b=document.getElementById("regulator-options"),I="d-none",T="fx-dropdown__toggle_disabled",B=document.querySelector(".popup-regulator"),_=document.documentElement.lang,A="Unidentified";function P(e){return e?.regulators.length&&n.applyClickEvent(".change-regulator-btn",q),Promise.resolve(e)}function q(e){const t=document.getElementById("selected-regulator").innerText,n=e.currentTarget.dataset.regulator;!function(e,t){const n=o.get(CookieNamesConfig.noSolicitationAcceptanceChangeToGM),i=("cysec"===e||"fca"===e)&&"gm"===t;return!n&&i}(t,n)?x(n):(B.classList.remove(v),B.dataset.regulator=n,O())}function x(e){userJurisdiction.defaultRegulator=e;const n=p.getRestrictionSnapshot();e=e||"gm",document.getElementById("selected-regulator").innerText=t.convertFromRegulatorId(e),f.updateAbTestElements().then((()=>a.updateAllSections(n))).then((()=>function(e){o.set(CookieNamesConfig.userRegulator,e,90),function(e){const t=userCountry,n=document.querySelector(".icon-info"),o=document.getElementById("footerMapLocationEl").firstElementChild,i=document.getElementById("rates-ticker-section-container"),s=document.getElementById("cysec-regulator-notification-title-text"),c=document.getElementById("fca-regulator-notification-title-text"),r=document.getElementById("gm-regulator-notification-title-text"),a=document.getElementById("cy-regulator-footer-info"),l=document.getElementById("other-regulator-footer-info"),d=document.querySelectorAll(".jp-risk-warning"),m=document.querySelectorAll(".br-risk-warning"),h=document.querySelectorAll(".pt-risk-warning");let g=document.getElementById("selected-country").dataset.country;"CN"===g&&(o.href="https://map.baidu.com/poi/FxPro%20UK%20Ltd/@-10113.17,6679857.795474138,14.68z?uid=37b760dbeab8d63de215f9a6&ugc_type=3&ugc_ver=1&device_ratio=1&compat=1&pcevaname=pc4.1&querytype=detailConInfo&da_src=shareurl");"AT"===g?U(n):H(n);switch(e){case"cysec":U(s),U(a),H(c),H(r),H(l),U(i);break;case"fca":U(c),U(l),H(s),H(r),H(a),U(i);break;case"gm":U(r),U(l),H(s),H(c),H(a),U(i);break;case"knn":U(r),U(l),H(s),H(c),H(a),H(i);break;case"fscm":H(a),U(l),H(i)}(function(){const e={restrictionState:p.getRestrictionSnapshot()};u.postPromise("/api/static-page/footer-risk-warning",e,null).then((e=>document.querySelector(".footer-frame").innerHTML=e))})(),$(),"ja"===_||"JP"===g||"JP"===t?Array.prototype.forEach.call(d,(function(e){e.classList.remove(v)})):Array.prototype.forEach.call(d,(function(e){e.classList.add(v)}));"BR"===g||"BR"===t?Array.prototype.forEach.call(m,(function(e){e.classList.remove(v)})):Array.prototype.forEach.call(m,(function(e){e.classList.add(v)}));"PT"!==g&&"PT"!==t||-1===["cysec","fca"].indexOf(e)?H(h):U(h);$()}(e),i.addAppsFlyerScript(),s.setMenus(),c&&c.updateNotifications(),l.setOneLink(),d.updateDirectLinks(),r&&r.init(),m.updateRestrictedElements(),h.loadDesktopImages(),h.loadMobileImages(),h.loadMobileVideos(),g.init()}(e))),"fscm"===e&&dataLayer.push({event:"FSCMPageLoaded",value:!0,countryByIp:userCountry,userExperiments:userExperiments})}function R(){const e=L.value;e?Array.prototype.forEach.call(document.getElementsByClassName("country-option"),(function(t){-1===t.innerText.toLowerCase().indexOf(e.toLowerCase())?t.classList.add(I):t.classList.remove(I)})):Array.prototype.forEach.call(document.getElementsByClassName("country-option"),(function(e){e.classList.remove(I)}))}function M(){B.classList.add(v),x(popup.dataset.regulator),o.set(CookieNamesConfig.noSolicitationAcceptanceChangeToGM,!0,30)}function N(){B.classList.add(v),O()}function O(){setTimeout((function(){L.value="",R()}),200)}function H(e){e&&e.classList&&e.classList.add(v)}function U(e){e&&e.classList&&e.classList.remove(v)}function $(){const e=document.getElementById("main-layout-container"),t=document.getElementById("rates-ticker-section-container");e&&t&&(e.style.marginTop=t.offsetHeight+"px")}e.init=function(){var o;(function(e,t){if(!C)throw new Error('Cannot set country due to there is no element with "selected-country" class');C.dataset.country="Unidentified"!==t?t.toUpperCase():t,C.innerText="TW"===C.dataset.country&&"tw"===_?"台湾地区":e;const n=document.getElementById(S);t===A?n.classList.add(v):(n.className="",n.classList.add(y),n.classList.add(w+t.toLowerCase()))})((o=userJurisdiction).name,o.code),function(e){return e?.regulators.length>1?(E.classList.remove(I),b.innerHTML=e.regulators.map((e=>`<div data-regulator='${e}' class='change-regulator-btn'> ${t.convertFromRegulatorId(e)} </div>`)).join("")):1===e?.regulators.length?E.classList.add(T):E.classList.add(I),Promise.resolve(e)}(userJurisdiction).then(P.bind(e)).then((e=>x(e.defaultRegulator))),n.applyClickEvent("#popup-confirm",M),n.applyClickEvent("#popup-cancel",N),n.applyKeyUpEvent("#country-search",R)}}class RestrictionController{restrictionService;constructor(){this.restrictionService=new RestrictionService}updateRestrictedElements(){const e=this.restrictionService.getRestrictionSnapshot();document.querySelectorAll("[data-restriction]").forEach((t=>{const n=t.dataset.restriction.replace(/'/g,'"'),o=JSON.parse(n);this.restrictionService.isRestricted(o,e)?t.classList.add("hide"):t.classList.remove("hide")}))}}function ToolsLinkController(){var e=new RestrictionService,t=new ScriptLoaderService,n=new PartnerService,o=!1;function i(e,t){n.getPartner().then((n=>{var o="https://fxpro.onelink.me/NHVX/",i={keys:["utm_campaign"],defaultValue:"website-cross-promo_smart_non-EU"},s={android:directAppStores.AndroidNonEu,ios:directAppStores.IosNonEu};function c(e){const t={oneLinkURL:o,afParameters:{mediaSource:{keys:["utm_source"],defaultValue:"Website-Cross-Promo"},channel:{keys:[],defaultValue:"Website-Cross-Promo"},campaign:i,adSet:{keys:["utm_term"]},googleClickIdKey:"af_sub4",afCustom:[{paramKey:["af_web_dp"],defaultValue:e===OsType.Ios?s.ios:s.android}]}};return n&&(t.afParameters.deepLinkValue={keys:[n]},t.afParameters.afSub1={keys:[n]},t.afParameters.afCustom.push({paramKey:["deepLinkSub1"],keys:[n]})),t}t&&"ru"==t.toLowerCase()?(o="https://fxpro.onelink.me/s3R9/",i.defaultValue="website-cross-promo_smart_RU",s.ios=directAppStores.IosRu):["fca","cysec"].includes(e)&&(o="https://fxpro.onelink.me/YhES/",i.defaultValue="website-cross-promo_smart_EU",s.android=directAppStores.AndroidEu,s.ios=directAppStores.IosEu);var r=window.AF_SMART_SCRIPT.generateOneLinkURL({...c(OsType.Android)}),a=window.AF_SMART_SCRIPT.generateOneLinkURL({...c(OsType.Ios)});r.clickURL&&Array.prototype.forEach.call(document.querySelectorAll(".onelink-android"),(function(e){e.href=r.clickURL})),a.clickURL&&Array.prototype.forEach.call(document.querySelectorAll(".onelink-ios"),(function(e){e.href=a.clickURL}))}))}this.setOneLink=function(){const n=e.getRestrictionSnapshot();return o?i(n.regulator,n.country):t.loadScript("assets/static-pages/scripts/lib/onelink-smart-script-v2.3.0.js").then((function(){if(window&&window.AF_SMART_SCRIPT)return o=!0,i(n.regulator,n.country)}))}}class HomeSectionsController{restrictionService=new RestrictionService;httpService=new HttpService;sectionMarketsController=new SectionMarketsController;searchController=new SearchController;updateAllSections(e){var t={restrictionState:e};const n=[this.updatePickAccountSection(t),this.updateSectionMarkets(t),this.updateSectionMarketItems(t),this.updateSectionHeroData(t)];return Promise.all(n)}updateSection(e,t,n){return this.httpService.postPromise(e,t,null).then((e=>{const t=document.querySelector(n);t&&(t.outerHTML=e)}))}updatePickAccountSection(e){return this.updateSection("/api/static-page/home/section-pick-account",e,"section-pick-account").then((()=>{const e=".fx-section--pick-account .swiper-container";document.querySelector(e)&&new Swiper(e,{slidesPerView:"auto",resistanceRatio:0})}))}updateSectionMarkets(e){return this.updateSection("/api/static-page/home/section-markets",e,"section-markets").then((()=>{this.sectionMarketsController.init(),this.searchController.init()}))}updateSectionMarketItems(e){return this.updateSection("/api/static-page/home/section-markets-items",e,"section-markets-items")}updateSectionHeroData(e){return this.updateSection("/api/static-page/home/section-hero-data",e,".hero-data")}updateSectionHero(e){return this.updateSection("/api/static-page/home/section-hero",{restrictionState:e.restrictionState,abTest:abTest},"section-hero")}}class MessengerController{mobileChatOptionsClass="mobile-chat-options";mobileChatOptionsSelector=`.${this.mobileChatOptionsClass}`;mobileChatOptionsEl=document.querySelector(this.mobileChatOptionsSelector);onAfterChatLoadedCallbacks=[];log=console.log;constructor(){this.restrictionService=new RestrictionService,this.scriptLoaderService=new ScriptLoaderService,this.eventService=new EventService,this.cookieService=new CookieService,this.regulatorService=new RegulatorService,this.init=this.runOnce(this.init.bind(this)),this.openChatWindow=this.openChatWindow.bind(this),this.closeChat=this.closeChat.bind(this),this.minimizeChat=this.minimizeChat.bind(this),this.openLiveChat=this.openLiveChat.bind(this),this.runNowOrPostponeUntilChatLoaded=this.runNowOrPostponeUntilChatLoaded.bind(this)}init(){return this.addMessengerScript().then((()=>{this.setEvents(),this.setMessengers(),this.runOnAfterChatLoadedCallbacks()}))}runOnce(e){let t=!1;return function(){if(!t)return t=!0,e()}}addMessengerScript(){const e=this.restrictionService.getRestrictionSnapshot(),t=["NA","GH","NG","KE","ZA"];return t.includes(e.selectedCountry)||t.includes(e.country)?Promise.resolve():(this.scriptLoaderService.createScript("window.__lc = window.__lc || {};\n            window.__lc.license = 8811641"),this.scriptLoaderService.loadScript("https://cdn.livechatinc.com/tracking.js"))}setEvents(){this.eventService.applyClickEvent(".chat-btn-open",this.openPopup),this.eventService.applyClickEvent(".chat-btn-close",this.closePopup)}runOnAfterChatLoadedCallbacks(e=!1){const t=this;function n(){for(const n of t.onAfterChatLoadedCallbacks)"function"==typeof n&&(e&&t.log(` *** Chat's "on_after_load" hook is running fn: "${n.name}"`),n());t.onAfterChatLoadedCallbacks=[]}window.LC_API||(window.LC_API={}),window.LC_API.is_loaded&&window.LC_API.is_loaded()?n():window.LC_API.on_after_load=()=>{n()}}runNowOrPostponeUntilChatLoaded(e){const t=this;return function(){if(window.LC_API.is_loaded&&window.LC_API.is_loaded())return e();t.onAfterChatLoadedCallbacks.push(e)}}async setMessengers(){var e=document.documentElement.lang,t=this.cookieService.get(CookieNamesConfig.userRegulator),n=document.getElementById("selected-regulator"),o=t||this.regulatorService.convertToRegulatorId(n.innerText),i=await fetch(`/api/messengers-config/${o}/${e}`),s=await i.json(),c=document.querySelector(".mobile-chat-options");c.classList.add("showBlock");for(var r=document.querySelector(".chat-options");r.firstChild;)r.removeChild(r.firstChild);if(1===s.length)return c.classList.remove("showBlock"),void this.runNowOrPostponeUntilChatLoaded(this.minimizeChat)();this.runNowOrPostponeUntilChatLoaded(this.closeChat)(),s.forEach((function(e){var t=document.createElement("a");"livechat"!==e.provider?(t.target="_blank",t.href=e.link,t.classList.add("chat-link-inner")):(t.href="javascript:void(0)",t.classList.add("live-chat-link-inner","chat-link-inner"));var n=document.createElement("img");n.src=`assets/img/sections/chat-icons/${e.provider}.svg`,n.alt="chat",n.classList.add("chat-icon-inner"),t.appendChild(n),document.querySelector(".chat-options").appendChild(t)})),this.eventService.applyClickEvent(".chat-link-inner",this.closePopup),this.eventService.applyClickEvent(".live-chat-link-inner",this.runNowOrPostponeUntilChatLoaded(this.openLiveChat))}openPopup(){this.mobileChatOptionsEl.classList.add("open")}closePopup(){this.mobileChatOptionsEl.classList.remove("open")}openLiveChat(){window.LC_API.minimize_chat_window(),window.LC_API.open_chat_window()}openChatWindow(){window.LC_API.open_chat_window()}closeChat(){window.LC_API.hide_chat_window()}minimizeChat(){window.LC_API.minimize_chat_window()}}var NotificationsPopUpController=function(){var e=new HttpService,t=new CookieService,n=new RestrictionService,o=[],i=[],s=[],c=[];function r(){var e=JSON.parse(t.get(CookieNamesConfig.notificationPopupClosedNews));return e||[]}function a(){var e=JSON.parse(t.get(CookieNamesConfig.notificationPopupClosedNews));let n=o;var r;e&&e.length&&(n=o.filter((function(t){return e.indexOf(t.id)<0}))),i=n.filter((e=>!e.isInstrumentNotification&&!e.isUrgentNotification)),s=n.filter((e=>e.isInstrumentNotification)),c=n.filter((e=>e.isUrgentNotification)),function(){const e=document.querySelector("#notifications-popup"),t=document.querySelector("#notifications-popup-desktop");if(i.length&&e)if(window.innerWidth<1024){let t=i.map((function(e){var t="",n="";return e.linkURL&&(t='<a class="popup-link" href="'+e.linkURL+'" target="_blank" rel="noopener noreferrer">'+e.linkTitle+"</a>",n="no-link"),'<div class="notifications-popup__text desktop '+n+' swiper-slide" data-id="'+e.id+'"> <div class="popup-text">'+e.text+"</div> "+t+"</div> "})).join("");e.querySelector(".swiper-wrapper")&&(e.querySelector(".swiper-wrapper").innerHTML=t),e.classList.remove("hide"),new Swiper("#notifications-popup .swiper-container",{direction:"horizontal",slidesPerView:1,keyboard:!0,mousewheel:!0,simulateTouch:!0,loop:!1,navigation:!0,pagination:!1,preloadImages:!1,effect:"fade",fadeEffect:{crossFade:!0},autoplay:{delay:4e3,stopOnLastSlide:!1}}),document.getElementById("close-single-notification").addEventListener("click",d)}else{var n='<a href="javascript:void(0)" id="close-all-notifications" class="close-icon"> </a> <span class="icon-circle"> <i class="fx-symbol-bell"></i> </span>';let e=i.map((function(e){var t="",n="";return e.linkURL&&(t='<a class="popup-link" href="'+e.linkURL+'" target="_blank" rel="noopener noreferrer">'+e.linkTitle+"</a>",n="no-link"),'<div class="notifications-popup__text desktop '+n+'"> <div class="popup-text">'+e.text+"</div> "+t+"</div> "})).join("");e.length&&(t.innerHTML=n+e,t.classList.remove("hide"),document.getElementById("close-all-notifications").addEventListener("click",l))}}(),function(){const e=g();if(s.length&&e){const t=s[s.length-1],n=`\n                <div class="popup-title">${t.text}</div>\n                <div class="popup-link-new">\n                    <a href="${t.linkURL}">\n                        ${t.linkTitle} <span> →</span>\n                    </a>\n                </div>\n            `;e.querySelector(".inner-text").innerHTML=n,e.querySelector(".close-icon").addEventListener("click",u),e.classList.remove("hide")}}(),function(){const e=f();if(c.length&&e){const t=c[c.length-1];let n=`\n                <div class="popup-text">${t.text}</div>\n            `;t.linkURL&&(n+=`<div class="popup-link">\n                            <a href="${t.linkURL}">\n                                ${t.linkTitle} <span> →</span>\n                            </a>\n                        </div>\n                        `),e.querySelector(".urgent-notification-popup__text").innerHTML=n,e.querySelector(".close-icon").addEventListener("click",p),e.classList.remove("hide")}}(),(r=document.querySelector(".notifications-amount")).classList.remove("hide"),r.innerHTML=i.length+s.length+c.length,r.classList.toggle("important",s.length||c.length),!i.length&&document.querySelector("#notifications-popup").classList.add("hide"),!s.length&&g()&&g().classList.add("hide"),!c.length&&f()&&f().classList.add("hide"),!i.length&&!s.length&&!c.length&&document.querySelector(".notifications-amount").classList.add("hide")}function l(){m(document.querySelector("#notifications-popup"),i),m(document.querySelector("#notifications-popup-desktop"),i)}function d(){var e=r(),t=document.querySelector(".swiper-slide-active").dataset.id;e.push(t),h(e),a()}function u(){m(g(),s),a()}function p(){m(f(),c),a()}function m(e,t){e.classList.add("hide");var n=r();t.forEach((function(e){n.push(e.id)})),h(n)}function h(e){t.set(CookieNamesConfig.notificationPopupClosedNews,JSON.stringify(e),30)}function g(){const e=window.innerWidth<1024?".new-instruments-popup-mobile":".new-instruments-popup";return document.querySelector(e)}function f(){const e=window.innerWidth<1024?".urgent-notification-popup-mobile":".urgent-notification-popup";return document.querySelector(e)}window.addEventListener("resize",function(e,t){let n;return function(o){n&&clearTimeout(n),n=setTimeout(e,t,o)}}((function(){a()}),150)),this.updateNotifications=function(){if(!t.getCookiesConsent())return;const i=document.documentElement.lang,s={restrictionState:n.getRestrictionSnapshot()};e.post("/api/notification-pop-ups/get-allowed/"+i,(function(e){if(200!==e.status)return;const t=JSON.parse(e.response);o=t,a()}),s)}},QuotesController=function(){let e=[];this.setMarketsQuotes=function(t){var n=document.querySelector(".active.market-select-btn").dataset.category;const o=Array.from(document.getElementsByClassName("market-instrument")).filter((e=>e.dataset.category===n)).map((e=>e.dataset.name.toString().replace("#","%23").replace("&","%26"))).join(",");return fetch("https://instruments.fxpro.technology"+`/symbols/prices?symbols=${o}&serverId=${t}`).then((e=>e.json())).then((function(t){e=t}))},this.updateMarketsQuotes=function(){Array.prototype.forEach.call(document.getElementsByClassName("market-instrument"),(function(t){var n=t.id,o=e.filter((function(e){return e.name===t.dataset.name}));if(o.length){var i=o[0],s=document.querySelector("#"+n+" .buy"),c=document.querySelector("#"+n+" .sell"),r=document.querySelector("#"+n+" .spread");s.innerText=i.ask?.toFixed(i.digits)||"0",c.innerText=i.bid?.toFixed(i.digits)||"0",r.innerText=i.spread||"0",i.dailyChangePercentage>0?(t.classList.remove("down"),t.classList.add("up")):(t.classList.add("down"),t.classList.remove("up"))}}))}},SearchController=function(){var e=new EventService,t=new HttpService,n=new RestrictionService;const o=new Map;function i(i){var r=i.currentTarget.dataset.searchContainer;d(i);var a="#"+r+" .type-to-search-msg",l="#"+r+" .search-input-placehodler",p="#"+r+" .clear-wrapper",m="#"+r+" .search-icon-placeholder";if(!document.querySelector("#"+r+" .search-input").value)return c("#"+r+" .search-results"),c(p),s(a),s(l),s(m),void u(r);c(l),c(a),c(m),s(p),o.has(r)||o.set(r,function(o){return setTimeout((()=>{const i=document.querySelector("#"+o+" .search-input").value,r="#"+o+" .no-items-found-msg",a="#"+o+" .search-results",l={input:i,language:document.documentElement.lang};let d="/api/search/menus";return"section-markets"===o&&(d="/api/search",l.numberFoundItems=5,l.searchType="global"),l.restrictionState=n.getRestrictionSnapshot(),t.postPromise(d,l,null).then((function(t){const n=[...t.reduce(((e,t)=>e.set(t.id,t)),new Map).values()];if(n.length){const t=document.querySelector(a);c(r),s(a),t.innerHTML="",n.forEach((function(e){const n=document.createElement("div"),o=document.createElement("span");n.classList.add("ng-option"),o.classList.add("ng-option-label"),o.innerText=e.id,n.dataset.link=e.url,n.onclick=function(){window.location.href=this.dataset.link},n.appendChild(o),t.appendChild(n)})),e.applyMouseOverEvent(".search-results .ng-option",(i=".search-results .ng-option",e=>{document.querySelector(i+".selected")?.classList.remove("selected"),e.currentTarget.classList.add("selected")}))}else c(a),s(r);var i;u(o)}))}),500)}(r))}function s(e){var t=document.querySelector(e);t&&t.classList.remove("hide")}function c(e){var t=document.querySelector(e);t&&!t.classList.contains("hide")&&t.classList.add("hide")}function r(e){u(e.currentTarget.dataset.searchContainer),document.getElementById("search-component").classList.remove("slideInTop"),c("#modal-backdrop")}function a(){document.getElementById("search-component").classList.add("slideInTop"),document.querySelector("#search-component input").focus(),s("#modal-backdrop")}function l(e){c("#"+e+" .clear-wrapper"),c("#"+e+" .no-items-found-msg"),c("#"+e+" .type-to-search-msg"),c("#"+e+" .search-results"),c("#"+e+" .search-dropdown"),s("#"+e+" .search-input-placehodler");const t=document.querySelector("#"+e+" .search-input");t&&t.value&&c("#"+e+" .search-input-placehodler"),u(e)}function d(e){var t=e.currentTarget.dataset.searchContainer;s("#"+t+" .search-dropdown"),document.querySelector("#"+t+" .search-results").classList.contains("hide")&&(document.querySelector("#"+t+" .search-input").value.length?(s("#"+t+" .no-items-found-msg"),c("#"+t+" .type-to-search-msg")):(c("#"+t+" .no-items-found-msg"),s("#"+t+" .type-to-search-msg")))}function u(e){if(o.has(e)){const t=o.get(e);clearTimeout(t),o.delete(e)}}this.init=function(){document.addEventListener("click",(function(e){e.target.classList.contains("search-input")||e.target.classList.contains("ng-option")||(c(".type-to-search-msg"),c(".search-dropdown"),s(".search-input-placehodler"),l("search-component"),l("section-markets"))})),document.addEventListener("keydown",(function(e){const t=document.querySelector(".search-results:not(.hide)");if(t){const n=t.querySelector(".ng-option.selected");if(n)switch(n.classList.remove("selected"),e.key){case"ArrowUp":{const e=n.previousElementSibling;e?e.classList.add("selected"):t.lastElementChild.classList.add("selected");break}case"ArrowDown":{const e=n.nextElementSibling;e?e.classList.add("selected"):t.firstElementChild.classList.add("selected");break}}else t.querySelector(".ng-option").classList.add("selected")}})),e.applyInputEvent(".search-input",i),e.applyClickEvent(".search-input",d),e.applyClickEvent(".search-toggle",a),e.applyClickEvent(".close-search",r)}},SectionMarketsController=function(){var e,t=new EventService,n=new HttpService,o=new QuotesController,i=new RestrictionService,s=[],c=new PartnerService;function r(e){const t=document.documentElement.lang,o=document.getElementById(e).dataset.category,r=i.getRestrictionSnapshot();return c.getPartner().then((e=>{const i={restrictionState:r,partner:e};return n.postPromise("/api/static-page/market-instruments/"+t+"/"+o,i,null)})).then((function(t){return document.querySelector(".table-body").insertAdjacentHTML("beforeend",t),s.push(e),l(e)}))}function a(){var e=this.id;-1===s.indexOf(e)?r(e):l(e);const t=document.querySelector(".linknote"),n=document.querySelector(".linknote .current-market");t&&n&&("global_Popular"===e?t.classList.add("d-none"):(n.innerHTML=this.dataset.title,document.querySelector(".linknote a").href=this.dataset.url,t.classList.remove("d-none")))}function l(e){var t=document.getElementById(e);if(!t.classList.contains("active")){var n=document.querySelector(".active.market-select-btn"),o=document.getElementsByClassName("market-instrument");return n&&n.classList.remove("active"),t.classList.add("active"),Array.prototype.forEach.call(o,(function(t){t.classList.contains(e)?t.classList.remove("d-none"):t.classList.contains("d-none")||t.classList.add("d-none")})),d(),!0}return!1}function d(){const t=document.querySelector("#section-markets").dataset.serverId,n=()=>(o.setMarketsQuotes(t).then((()=>o.updateMarketsQuotes())),n);e&&(clearInterval(e),e=0),e=setInterval(n(),3e4)}function u(){document.querySelector("#footnotes_anchor_1").scrollIntoView({block:"center"})}this.init=function(){var e=document.querySelector(".market-select-btn.active").id;document.querySelector(".table-body").innerHTML="",document.querySelector("#market-categories-container").innerHTML="",s=[],function(){const e=document.documentElement.lang,o={restrictionState:i.getRestrictionSnapshot()};return n.postPromise("/api/static-page/market-categories/"+e,o,null).then((e=>(document.querySelector("#market-categories-container").innerHTML=e,t.applyClickEvent(".market-select-btn",a),t.applyClickEvent(".footer-anchor-link",u),!0)))}().then((function(){return r(document.querySelector("#"+e)?e:"global_Popular")})).then((e=>{e||d()}))}},SendSmsController=function(){var e=new EventService,t=new CountriesService;function n(){document.getElementById("send-sms-form").checkValidity()&&grecaptcha.execute()}function o(e){var t=e.currentTarget.hasAttribute("data-phone")?e.currentTarget:e.currentTarget.parentNode;document.getElementById("phone-code").innerText=t.getAttribute("data-phone"),document.getElementById("send-sms-selected-flag").className="",document.getElementById("send-sms-selected-flag").classList.add("flag-icon","flag-icon-"+t.getAttribute("data-flag")),i()}function i(){var n=document.getElementById("send-sms-container"),i=document.getElementById("send-sms-options"),s=function(){n.classList.contains("open")?n.classList.remove("open"):n.classList.add("open")};i.innerHTML.trim()?s():t.getCountriesPromise().then((function(t){var n="";t.forEach((function(e){if(e.phoneCode){var t='<li _ngcontent-ng-cli-universal-c136="" class="phone-code-option" data-country="'+e.name+'" data-phone="'+e.phoneCode+'" data-flag="'+e.code+'"><i _ngcontent-ng-cli-universal-c136="" class="flag-icon flag-icon-'+e.code+'"></i> <div _ngcontent-ng-cli-universal-c136="" class="title tel-code-country">'+e.name+'</div><span _ngcontent-ng-cli-universal-c136="" class="tel-code">'+e.phoneCode+"</span> </li>";n+=t}})),i.innerHTML=n,e.applyClickEvent(".phone-code-option",o),s()}))}function s(e){var t=e.currentTarget.value;t?Array.prototype.forEach.call(document.getElementsByClassName("phone-code-option"),(function(e){-1===e.getAttribute("data-country").toLowerCase().indexOf(t.toLowerCase())&&-1===e.getAttribute("data-phone").toLowerCase().indexOf(t.toLowerCase())?e.classList.add("d-none"):e.classList.remove("d-none")})):Array.prototype.forEach.call(document.getElementsByClassName("phone-code-option"),(function(e){e.classList.remove("d-none")}))}function c(e){let t=String.fromCharCode(e.charCode);8===e.keyCode||/[0-9]/.test(t)||e.preventDefault()}this.init=function(){e.applyKeyUpEvent(".search-phone-code",s),e.applyKeyPressEvent("#phone-number",c),e.applyClickEvent(".send-sms-submit",n),e.applyClickEvent("#drop-code",i),function(){if("false"!==document.body.dataset.cn||window.innerWidth<1024)return;t.getUserCountryConfig().then((function(e){const t="flag-icon-"+e.code.toLowerCase();document.getElementById("send-sms-selected-flag").classList.add(t),document.getElementById("phone-code").innerText=e.phoneCode}))}()}},SendSmsBlockController=function(){new RestrictionService;var e=new HttpService,t=new SendSmsController,n=new ScriptLoaderService;this.init=function(){const o=document.getElementById("send-markets-link-by-sms");if(o){var i=new IntersectionObserver((function(o){o.forEach((function(o){if(o.isIntersecting){var s=o.target;!function(o){const i={restrictionState:this.restrictionService.getRestrictionSnapshot()};e.postPromise("/api/static-page/send-sms-block",i,null).then((e=>{var i;o.innerHTML=e,i="true"===document.body.dataset.cn,window.innerWidth>=1024&&!i&&n.loadScriptFile("https://www.google.com/recaptcha/api.js?render=explicit&onload=onloadCallback"),t.init()}))}(s),i.unobserve(s)}}))}),{threshold:.3});i.observe(o)}}};function onloadCallback(){grecaptcha.render("recaptcha",{sitekey:"6Ldo-n0UAAAAAJoGo5Kx3QBPHaj3TCxW5ETcU024",size:"invisible",callback:(new EventsController).onSMSSubmit})}class SupportPanelController{restrictionService=new RestrictionService;init(){(new EventService).applyClickEvent(".fx-section--support #qq-button",this.onOpenQQChat)}onOpenQQChat(){let e=window.open("http://wpa.b.qq.com/cgi/wpa.php?ln=2&uin=4001203218","support","toolbar=no, resizable=yes, status=no, menubar=no, location=no, width=500, height=400, copyhistory=no, scrollbars=yes, directories=no");window.focus&&e.focus()}}class TradingAccountController{restrictionService;constructor(){this.restrictionService=new RestrictionService}init(){this.tradingAccountData()}async tradingAccountData(){const e=this.restrictionService.getRestrictionSnapshot(),t=await fetch(`/api/trading-accounts/config/${e.regulator}`),n=await t.json();if(!Boolean(n)||"object"!=typeof n||"object"==typeof n&&!Object.keys(n).length)return;const o=this.getConfig(n.mt4m,e),i=this.getConfig(n.mt4pro,e),s=this.getConfig(n.mt4raw,e),c=this.getConfig(n.mt4vvip,e);this.setElement("tradingAccountMaxLeverage",s.maxLeverage),this.setElement("minDepositStandard",o.minDeposit),this.setElement("minDepositPro",i.minDeposit),this.setElement("minDepositRaw",s.minDeposit),this.setElement("minDepositElite",c.minDeposit)}getConfig(e,t){return Boolean(e)&&"object"==typeof e?e.find((e=>e.country===t.selectedCountry))?e.find((e=>e.country===t.selectedCountry)):e.find((e=>"default"===e.country)):null}setElement(e,t){const n=document.getElementById(e);n&&(n.innerText=t)}}class AbTestController{isFirst=!0;constructor(){this.httpService=new HttpService,this.restrictionService=new RestrictionService}updateSection(e,t,n){return this.httpService.postPromise(e,t,null).then((e=>{const t=document.querySelector(n);document.createElement("section-hero").innerHTML=e,t&&(t.outerHTML=e)}))}updateAbTestElements(){return new Promise((e=>{if(this.isFirst)e(abTest),this.isFirst=!1;else{const t=this.restrictionService.getRestrictionSnapshot();this.httpService.postPromise("api/static-page/ab-test-update",t,null).then((n=>{abTest=n,this.updateSection("/api/static-page/home/section-hero",{restrictionState:t,abTest:abTest},"section-hero"),e(n)}))}}))}}